(undo-tree-save-format-version . 1)
"50b204e1669318c515d79a37772867a728d1adbe"
[nil nil nil nil (25282 19395 733695 552000) 0 nil]
([nil nil ((1 . 2622) (#("from decimal import Decimal
from django.conf import settings
from django.http import HttpResponse
from django.shortcuts import render, redirect

class Cart(object):
		def __init__(self, request):
				self.request=request
				self.session=request.session
				cart=self.session.get(settings.CART_SESSION_ID)
				if not cart:
						# salva um carrinho vazio na sessao
						cart=self.session[settings.CART_SESSION_ID]={}
				self.cart=cart
		def add(self, product, quantity=1, action=None):
				\"\"\"
				Adiciona um produto ao carrinho, ou atualiza sua quantidade.
				\"\"\"
				id=product.id
				newItem=True
				if str(product.id) not in self.cart.keys():
						self.cart[product.id]={
								'userid': self.request.user.id,
								'product_id': id,
								'name': product.name,
								'quantity': 1,
								'price': str(product.price),
								'image': product.image.url
						}
				else:
						#newItem=True
						for k,v in self.cart.items():
								if k==str(product.id):
										v['quantity']=v['quantity']+1
										#newItem=False
										self.save()
										break
						\"\"\"if newItem==True:
								self.add(product, quantity=1, action=None)								
								self.cart[product.id]={
										'userid':	self.request,
										'product_id': product.id,
										'name': product.name,
										'quantity': 1,
										'price': str(product.price),
										'image': product.image.url
								}
						\"\"\"
				self.save()

		def save(self):
				# atualiza a sessao do carrinho
				self.session[settings.CART_SESSION_ID]=self.cart
				# marca a sessao como modificado para ter certeza que esta salvo.
				self.session.modified=True

		def remove(self, product):
				\"\"\"
				Remove um produto do carrinho
				\"\"\"
				product_id=str(product.id)
				if(product_id in self.cart):
						del self.cart[product_id]
						self.save()

		def decrement(self, product):
				for k,v in self.cart.items():
					if k==str(product.id):
							v['quantity']=v['quantity']-1
							if(v['quantity']<1):
									return redirect('cart_detail')
							self.save()
							break
					else:
							print(\"Something's Wrong\")
						
		def clear(self):
				# limpa o carrinho
				self.session[settings.CART_SESSION_ID]={}
				self.session.modified=True
" 0 4 (face font-lock-keyword-face fontified t) 4 13 (fontified t) 13 19 (face font-lock-keyword-face fontified t) 19 28 (fontified t) 28 32 (face font-lock-keyword-face fontified t) 32 45 (fontified t) 45 51 (face font-lock-keyword-face fontified t) 51 61 (fontified t) 61 65 (face font-lock-keyword-face fontified t) 65 78 (fontified t) 78 84 (face font-lock-keyword-face fontified t) 84 98 (fontified t) 98 102 (face font-lock-keyword-face fontified t) 102 120 (fontified t) 120 126 (face font-lock-keyword-face fontified t) 126 145 (fontified t) 145 150 (face font-lock-keyword-face fontified t) 150 151 (fontified t) 151 155 (face font-lock-type-face fontified t) 155 156 (face (rainbow-delimiters-depth-1-face) fontified t) 156 162 (face font-lock-builtin-face fontified t) 162 163 (face (rainbow-delimiters-depth-1-face) fontified t) 163 167 (fontified t) 167 170 (face font-lock-keyword-face fontified t) 170 171 (fontified t) 171 179 (face font-lock-function-name-face fontified t) 179 180 (face (rainbow-delimiters-depth-1-face) fontified t) 180 184 (face font-lock-keyword-face fontified t) 184 193 (fontified t) 193 194 (face (rainbow-delimiters-depth-1-face) fontified t) 194 200 (fontified t) 200 204 (face font-lock-keyword-face fontified t) 204 205 (fontified t) 205 212 (face font-lock-variable-name-face fontified t) 212 225 (fontified t) 225 229 (face font-lock-keyword-face fontified t) 229 230 (fontified t) 230 237 (face font-lock-variable-name-face fontified t) 237 258 (fontified t) 258 262 (face font-lock-variable-name-face fontified t) 262 263 (fontified t) 263 267 (face font-lock-keyword-face fontified t) 267 279 (fontified t) 279 280 (face (rainbow-delimiters-depth-1-face) fontified t) 280 304 (fontified t) 304 305 (face (rainbow-delimiters-depth-1-face) fontified t) 305 310 (fontified t) 310 312 (face font-lock-keyword-face fontified t) 312 313 (fontified t) 313 316 (face font-lock-keyword-face fontified t) 316 317 (fontified t) 317 321 (face font-lock-variable-name-face fontified t) 321 329 (fontified t) 329 331 (face font-lock-comment-delimiter-face fontified t) 331 365 (face font-lock-comment-face fontified t) 365 376 (fontified t) 376 380 (face font-lock-keyword-face fontified t) 380 381 (fontified t) 381 388 (face font-lock-variable-name-face fontified t) 388 389 (face (rainbow-delimiters-depth-1-face) fontified t) 389 398 (fontified t) 398 413 (face font-lock-variable-name-face fontified t) 413 414 (face (rainbow-delimiters-depth-1-face) fontified t) 414 415 (fontified t) 415 416 (face (rainbow-delimiters-depth-1-face) fontified t) 416 417 (face (rainbow-delimiters-depth-1-face) fontified t) 417 422 (fontified t) 422 426 (face font-lock-keyword-face fontified t) 426 427 (fontified t) 427 431 (face font-lock-variable-name-face fontified t) 431 439 (fontified t) 439 442 (face font-lock-keyword-face fontified t) 442 443 (fontified t) 443 446 (face font-lock-function-name-face fontified t) 446 447 (face (rainbow-delimiters-depth-1-face) fontified t) 447 451 (face font-lock-keyword-face fontified t) 451 481 (fontified t) 481 485 (face font-lock-constant-face fontified t) 485 486 (face (rainbow-delimiters-depth-1-face) fontified t) 486 492 (fontified t) 492 494 (face font-lock-doc-face fontified t) 494 495 (face font-lock-doc-face fontified t syntax-table (15)) 495 565 (face font-lock-doc-face fontified t) 565 566 (face font-lock-doc-face syntax-table (15) fontified t) 566 568 (face font-lock-doc-face fontified t) 568 573 (fontified t) 573 575 (face font-lock-builtin-face fontified t) 575 584 (fontified t) 584 586 (face font-lock-builtin-face fontified t) 586 599 (fontified t) 599 603 (face font-lock-constant-face fontified t) 603 608 (fontified t) 608 610 (face font-lock-keyword-face fontified t) 610 611 (fontified t) 611 614 (face font-lock-builtin-face fontified t) 614 615 (face (rainbow-delimiters-depth-1-face) fontified t) 615 623 (fontified t) 623 625 (face font-lock-builtin-face fontified t) 625 626 (face (rainbow-delimiters-depth-1-face) fontified t) 626 627 (fontified t) 627 630 (face font-lock-keyword-face fontified t) 630 631 (fontified t) 631 633 (face font-lock-keyword-face fontified t) 633 634 (fontified t) 634 638 (face font-lock-keyword-face fontified t) 638 648 (fontified t) 648 649 (face (rainbow-delimiters-depth-1-face) fontified t) 649 650 (face (rainbow-delimiters-depth-1-face) fontified t) 650 658 (fontified t) 658 662 (face font-lock-keyword-face fontified t) 662 667 (fontified t) 667 668 (face (rainbow-delimiters-depth-1-face) fontified t) 668 676 (fontified t) 676 678 (face font-lock-builtin-face fontified t) 678 679 (face (rainbow-delimiters-depth-1-face) fontified t) 679 680 (fontified t) 680 681 (face (rainbow-delimiters-depth-1-face) fontified t) 681 690 (fontified t) 690 698 (face font-lock-string-face fontified t) 698 700 (fontified t) 700 704 (face font-lock-keyword-face fontified t) 704 718 (fontified t) 718 720 (face font-lock-builtin-face fontified t) 720 730 (fontified t) 730 742 (face font-lock-string-face fontified t) 742 744 (fontified t) 744 746 (face font-lock-builtin-face fontified t) 746 756 (fontified t) 756 762 (face font-lock-string-face fontified t) 762 786 (fontified t) 786 796 (face font-lock-string-face fontified t) 796 809 (fontified t) 809 816 (face font-lock-string-face fontified t) 816 818 (fontified t) 818 821 (face font-lock-builtin-face fontified t) 821 822 (face (rainbow-delimiters-depth-2-face) fontified t) 822 835 (fontified t) 835 836 (face (rainbow-delimiters-depth-2-face) fontified t) 836 846 (fontified t) 846 853 (face font-lock-string-face fontified t) 853 879 (fontified t) 879 880 (face (rainbow-delimiters-depth-1-face) fontified t) 880 885 (fontified t) 885 889 (face font-lock-keyword-face fontified t) 889 897 (fontified t) 897 898 (face font-lock-comment-delimiter-face fontified t) 898 911 (face font-lock-comment-face fontified t) 911 917 (fontified t) 917 920 (face font-lock-keyword-face fontified t) 920 925 (fontified t) 925 927 (face font-lock-keyword-face fontified t) 927 928 (fontified t) 928 932 (face font-lock-keyword-face fontified t) 932 943 (fontified t) 943 944 (face (rainbow-delimiters-depth-1-face) fontified t) 944 945 (face (rainbow-delimiters-depth-1-face) fontified t) 945 955 (fontified t) 955 957 (face font-lock-keyword-face fontified t) 957 961 (fontified t) 961 964 (face font-lock-builtin-face fontified t) 964 965 (face (rainbow-delimiters-depth-1-face) fontified t) 965 973 (fontified t) 973 975 (face font-lock-builtin-face fontified t) 975 976 (face (rainbow-delimiters-depth-1-face) fontified t) 976 989 (fontified t) 989 990 (face (rainbow-delimiters-depth-1-face) fontified t) 990 1000 (face font-lock-string-face fontified t) 1000 1001 (face (rainbow-delimiters-depth-1-face) fontified t) 1001 1003 (fontified t) 1003 1004 (face (rainbow-delimiters-depth-1-face) fontified t) 1004 1014 (face font-lock-string-face fontified t) 1014 1015 (face (rainbow-delimiters-depth-1-face) fontified t) 1015 1028 (fontified t) 1028 1029 (face font-lock-comment-delimiter-face fontified t) 1029 1043 (face font-lock-comment-face fontified t) 1043 1053 (fontified t) 1053 1057 (face font-lock-keyword-face fontified t) 1057 1062 (fontified t) 1062 1063 (face (rainbow-delimiters-depth-1-face) fontified t) 1063 1064 (face (rainbow-delimiters-depth-1-face) fontified t) 1064 1075 (fontified t) 1075 1080 (face font-lock-keyword-face fontified t) 1080 1087 (fontified t) 1087 1089 (face font-lock-string-face fontified t) 1089 1090 (face font-lock-string-face syntax-table (15) fontified t) 1090 1418 (face font-lock-string-face fontified t) 1418 1419 (face font-lock-string-face syntax-table (15) fontified t) 1419 1421 (face font-lock-string-face fontified t) 1421 1426 (fontified t) 1426 1430 (face font-lock-keyword-face fontified t) 1430 1435 (fontified t) 1435 1436 (face (rainbow-delimiters-depth-1-face) fontified t) 1436 1437 (face (rainbow-delimiters-depth-1-face) fontified t) 1437 1441 (fontified t) 1441 1444 (face font-lock-keyword-face fontified t) 1444 1445 (fontified t) 1445 1449 (face font-lock-function-name-face fontified t) 1449 1450 (face (rainbow-delimiters-depth-1-face) fontified t) 1450 1454 (face font-lock-keyword-face fontified t) 1454 1455 (face (rainbow-delimiters-depth-1-face) fontified t) 1455 1461 (fontified t) 1461 1463 (face font-lock-comment-delimiter-face fontified t) 1463 1493 (face font-lock-comment-face fontified t) 1493 1497 (fontified t) 1497 1500 (face font-lock-keyword-face fontified t) 1500 1501 (face font-lock-keyword-face fontified t) 1501 1509 (fontified t) 1509 1510 (face (rainbow-delimiters-depth-1-face) fontified t) 1510 1519 (fontified t) 1519 1534 (face font-lock-variable-name-face fontified t) 1534 1535 (face (rainbow-delimiters-depth-1-face) fontified t) 1535 1536 (fontified t) 1536 1540 (face font-lock-keyword-face fontified t) 1540 1546 (fontified t) 1546 1683 (fontified nil) 1683 1684 (syntax-table (15) fontified nil) 1684 1723 (fontified nil) 1723 1724 (syntax-table (15) fontified nil) 1724 2244 (fontified nil)) . 1) (undo-tree-id19 . -308) (undo-tree-id20 . -306) (undo-tree-id21 . -323) (undo-tree-id22 . -375) (undo-tree-id23 . -417) (undo-tree-id24 . -308) (undo-tree-id25 . -308) (t 25273 9467 976605 292000)) nil (25282 19395 733685 988000) 0 nil])
([nil nil ((#("
" 0 1 (fontified t)) . 145) (undo-tree-id3 . -1) (undo-tree-id4 . -1) (undo-tree-id5 . -1) (undo-tree-id6 . -1) (undo-tree-id7 . -1) (undo-tree-id8 . -1) (undo-tree-id9 . -1) (undo-tree-id10 . -1) (undo-tree-id11 . -1) (undo-tree-id12 . -1) (undo-tree-id13 . -1) (undo-tree-id14 . -1) (undo-tree-id15 . -1) (undo-tree-id16 . -1) (undo-tree-id17 . -1) (undo-tree-id18 . -1)) nil (25282 19395 733241 312000) 0 nil])
([nil nil ((145 . 146)) nil (25282 19395 733157 502000) 0 nil])
([nil nil ((#("								" 0 8 (face font-lock-string-face fontified t)) . 1379) (undo-tree-id0 . -8) (undo-tree-id1 . -8) (undo-tree-id2 . -8)) nil (25282 19395 733140 434000) 0 nil])
([nil nil ((#("        newItem = True
" 0 18 (fontified t) 18 22 (face font-lock-constant-face fontified t) 22 23 (fontified t)) . 656) (undo-tree-id26 . -18) (undo-tree-id27 . -23) (t 25282 19395 735222 681000)) nil (25282 19466 329510 293000) 0 nil])
([nil current ((2385 . 2390) (2385 . 2400) (2364 . 2385) (2359 . 2364) (2342 . 2359) (2286 . 2288) (#("<" 0 1 (fontified t)) . -2286) (undo-tree-id0 . -1) (undo-tree-id1 . -1) 2287 (t 25282 19466 325223 597000)) nil (25286 21997 46328 870000) 0 nil])
nil
